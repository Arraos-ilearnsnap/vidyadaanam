<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Which Ratio is Larger?</title>

<style>
  body{
    margin:0;
    font-family:Segoe UI,Roboto,Arial,sans-serif;
    background:#fff;
    color:#111;
  }
  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
  }
  .card{
    width:100%;
    max-width:900px;
    background:#fff;
    padding:24px;
    border-radius:10px;
    box-shadow:0 8px 28px rgba(0,0,0,0.08);
  }
  h1{
    font-size:16px;
    margin:0 0 12px;
    font-weight:700;
  }
  .question{
    font-size:20px;
    color:#0b59c6;
    font-weight:700;
    margin-bottom:10px;
  }
  .prompt{
    font-size:13px;
    color:#666;
    font-style:italic;
  }
  .steps{
    white-space:pre-line;
    font-size:17px;
    line-height:1.6;
    margin-top:16px;
  }
  .hidden{display:none;}
  .foot{
    margin-top:12px;
    font-size:13px;
    color:#666;
  }
</style>
</head>

<body>
<div class="wrap">
  <div class="card" id="card">
    <h1>Ratio Comparison</h1>
    <div class="question" id="qText"></div>
    <div class="prompt" id="prompt">Press any key to reveal the solution…</div>
    <div class="steps hidden" id="stepsBox"></div>
    <div class="foot">After reveal press <b>y</b> for next or <b>n</b> to exit.</div>
  </div>
</div>

<script>
(function(){

function r(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

// -------------------------------
// Linguistic variants (3 styles)
// -------------------------------
const VARIANTS = [
  (a1,b1,a2,b2)=>`Which ratio is larger in the following pair?   ${a1}:${b1}  or  ${a2}:${b2}`,
  (a1,b1,a2,b2)=>`Compare the two ratios ${a1}:${b1} and ${a2}:${b2}. Which one is greater?`,
  (a1,b1,a2,b2)=>`Out of the ratios ${a1}:${b1} and ${a2}:${b2}, determine the larger ratio.`
];

// generate ONLY proper fractions
function generatePair(){
  let b1 = r(2,30);
  let a1 = r(1,b1-1);

  let b2 = r(2,30);
  let a2 = r(1,b2-1);

  return {a1,b1,a2,b2};
}

// compute LCM with ladder steps
function lcmSteps(x,y){
  let a=x, b=y;
  let steps=[];
  let divisor=2;
  let lcm=1;

  while(a>1 || b>1){
    if(a%divisor===0 || b%divisor===0){
      steps.push({div:divisor, a, b});
      if(a%divisor===0) a/=divisor;
      if(b%divisor===0) b/=divisor;
      lcm*=divisor;
    }else{
      divisor++;
    }
  }
  return {steps,lcm};
}

let DATA=null, stage="question";
const qEl=document.getElementById("qText");
const stepsEl=document.getElementById("stepsBox");
const prompt=document.getElementById("prompt");

function newProblem(){
  stage="question";
  stepsEl.classList.add("hidden");
  stepsEl.textContent="";
  prompt.textContent="Press any key to reveal the solution…";

  const {a1,b1,a2,b2} = generatePair();
  const variant = VARIANTS[r(0,VARIANTS.length-1)];
  DATA={a1,b1,a2,b2};
  qEl.textContent = variant(a1,b1,a2,b2);
}

function reveal(){
  stage="answer";
  stepsEl.classList.remove("hidden");
  prompt.textContent='Press "y" for next or "n" to exit.';

  const {a1,b1,a2,b2} = DATA;
  const lcmData = lcmSteps(b1,b2);
  const LCM = lcmData.lcm;

  const f1 = LCM / b1;
  const f2 = LCM / b2;

  const n1 = a1 * f1;
  const n2 = a2 * f2;

  let t="";

  t+="Step 1 — Write both ratios as fractions\n";
  t+=`${a1}:${b1} = ${a1}/${b1}\n`;
  t+=`${a2}:${b2} = ${a2}/${b2}\n\n`;

  t+="Step 2 — Find the LCM of the denominators ("+b1+" and "+b2+")\n";
  t+="LCM calculation (shown clearly):\n\n";

  lcmData.steps.forEach(s=>{
    t+=`${s.div} | ${s.a} , ${s.b}\n`;
  });
  t+="    1 , 1\n\n";
  t+=`LCM = ${lcmData.steps.map(s=>s.div).join(" × ")} = ${LCM}\n\n`;

  t+="Step 3 — Convert both fractions to the same denominator\n";
  t+=`For ${a1}/${b1}:\n`;
  t+=`= (${a1} × ${f1}) / (${b1} × ${f1}) = ${n1}/${LCM}\n\n`;
  t+=`For ${a2}/${b2}:\n`;
  t+=`= (${a2} × ${f2}) / (${b2} × ${f2}) = ${n2}/${LCM}\n\n`;

  t+="Step 4 — Compare the numerators\n";
  t+=`${n1}/${LCM}  and  ${n2}/${LCM}\n`;
  t+=`${n1} ${n1>n2?">":"<"} ${n2}\n\n`;
  t+=`${n1}/${LCM} ${n1>n2?">":"<"} ${n2}/${LCM}\n\n`;

  t+="Step 5 — Write the conclusion in ratio form\n";
  if(n1>n2){
    t+=`${a1}/${b1} > ${a2}/${b2}\n\n`;
    t+=`${a1}:${b1} is larger than ${a2}:${b2}\n`;
  }else{
    t+=`${a2}/${b2} > ${a1}/${b1}\n\n`;
    t+=`${a2}:${b2} is larger than ${a1}:${b1}\n`;
  }

  stepsEl.textContent=t;
}

window.addEventListener("keydown", e=>{
  const k=(e.key||"").toLowerCase();
  if(stage==="question"){ reveal(); }
  else{
    if(k==="y") newProblem();
    else if(k==="n"){
      document.getElementById("card").innerHTML =
        '<div style="text-align:center;font-size:20px;padding:40px;">Goodbye — keep learning.</div>';
    }
  }
});

newProblem();
})();
</script>
</body>
</html>
