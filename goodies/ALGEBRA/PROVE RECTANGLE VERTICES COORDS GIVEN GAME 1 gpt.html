<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Coordinate Geometry — Proving a Rectangle (Rotated)</title>

<style>
:root{
  --primary:#1a73e8;
  --success:#1e8e3e;
  --accent:#d93025;
  --bg:#f8f9fa;
  --border:#dadce0;
}
body{
  margin:0;
  padding:32px;
  font-family:"Segoe UI", Arial, sans-serif;
  background:var(--bg);
  display:flex;
  justify-content:center;
}
.card{
  max-width:980px;
  width:100%;
  background:#ffffff;
  padding:44px;
  border-radius:26px;
  box-shadow:0 18px 55px rgba(0,0,0,0.12);
}
.q-header{
  font-size:14px;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:1px;
  color:#5f6368;
  margin-bottom:10px;
}
.q-text{
  font-size:26px;
  font-weight:800;
  padding:28px;
  background:#e8f0fe;
  border-left:10px solid var(--primary);
  border-radius:16px;
  margin-bottom:36px;
  color:#202124;
}
.step-group{
  margin-top:30px;
  border:1px solid var(--border);
  border-radius:16px;
  overflow:hidden;
}
.step-header{
  background:#f1f3f4;
  padding:14px 24px;
  font-weight:800;
  color:var(--primary);
  text-transform:uppercase;
  font-size:14px;
}
.step{
  padding:22px;
  font-family:"Cascadia Code","Consolas",monospace;
  font-size:18px;
  line-height:1.9;
}
.formula{
  color:var(--accent);
  font-weight:800;
  background:#fff5f5;
  padding:2px 8px;
  border-radius:4px;
}
.note{
  display:inline-block;
  margin-left:8px;
  padding:3px 8px;
  background:#e6f4ea;
  color:var(--success);
  border-radius:6px;
  font-size:14px;
  font-weight:700;
}
.final{
  margin-top:42px;
  padding:30px;
  background:var(--primary);
  color:#ffffff;
  border-radius:22px;
  text-align:center;
  font-size:32px;
  font-weight:900;
}
.prompt{
  margin-top:32px;
  text-align:center;
  font-size:14px;
  color:#777;
}
.hl{
  color:#d93025;
  font-weight:900;
}
</style>
</head>

<body>
<main class="card" id="card">
  <div id="content"></div>
  <div class="prompt" id="prompt">Press any key to reveal the solution.</div>
</main>

<script>
(function(){
"use strict";

const content = document.getElementById("content");
const prompt  = document.getElementById("prompt");
let stage="q";

function rand(min,max){
  return Math.floor(Math.random()*(max-min+1))+min;
}

/* ---------- Generate a rotated RECTANGLE (not square) ---------- */
let A,B,C,D;

function generateRectangle(){
  const x = rand(0,4);
  const y = rand(0,4);

  const dx = rand(2,4);
  const dy = rand(1,3);

  A = {x:x, y:y};
  B = {x:x+dx, y:y+dy};

  const px = -dy;
  const py = dx;
  const scale = rand(2,3);

  C = {x:B.x + scale*px, y:B.y + scale*py};
  D = {x:A.x + scale*px, y:A.y + scale*py};
}

/* ---------- Geometry helpers ---------- */
function dist(P,Q){
  return Math.sqrt((Q.x-P.x)**2 + (Q.y-P.y)**2);
}
function slope(P,Q){
  return (Q.y-P.y)/(Q.x-P.x);
}

/* ---------- Question ---------- */
function showQ(){
  generateRectangle();
  content.innerHTML = `
    <div class="q-header">Question</div>
    <div class="q-text">
      Prove that the points<br>
      <b>
      A(${A.x},${A.y}), 
      B(${B.x},${B.y}), 
      C(${C.x},${C.y}), 
      D(${D.x},${D.y})
      </b><br><br>
      are the vertices of a rectangle.
    </div>
  `;
  stage="q";
}

/* ---------- Solution ---------- */
function showA(){
  const AB = dist(A,B);
  const BC = dist(B,C);
  const CD = dist(C,D);
  const DA = dist(D,A);

  const mAB = slope(A,B);
  const mBC = slope(B,C);

  content.innerHTML += `

  <div class="step-group">
    <div class="step-header">Step 1: Distance Formula (Opposite Sides)</div>
    <div class="step">
      Distance between two points is given by:<br>
      <span class="formula">√[(x₂−x₁)² + (y₂−y₁)²]</span><br><br>

      AB = √[(${B.x}−${A.x})² + (${B.y}−${A.y})²]<br>
      &nbsp;&nbsp; = √[(${B.x-A.x})² + (${B.y-A.y})²]<br>
      &nbsp;&nbsp; = <b>${AB.toFixed(2)}</b><br><br>

      CD = √[(${D.x}−${C.x})² + (${D.y}−${C.y})²]<br>
      &nbsp;&nbsp; = √[(${D.x-C.x})² + (${D.y-C.y})²]<br>
      &nbsp;&nbsp; = <b>${CD.toFixed(2)}</b><br><br>

      BC = √[(${C.x}−${B.x})² + (${C.y}−${B.y})²] = <b>${BC.toFixed(2)}</b><br>
      DA = √[(${A.x}−${D.x})² + (${A.y}−${D.y})²] = <b>${DA.toFixed(2)}</b><br><br>

      <span class="note">Both pairs of opposite sides are equal</span>
    </div>
  </div>

  <div class="step-group">
    <div class="step-header">Step 2: Slope Formula (Right Angle)</div>
    <div class="step">
      Slope of a line joining (x₁,y₁) and (x₂,y₂):<br>
      <span class="formula">m = (y₂ − y₁)/(x₂ − x₁)</span><br><br>

      Slope AB = (${B.y}−${A.y}) / (${B.x}−${A.x})<br>
      &nbsp;&nbsp; = ${B.y-A.y}/${B.x-A.x}<br>
      &nbsp;&nbsp; = <b>${mAB.toFixed(2)}</b><br><br>

      Slope BC = (${C.y}−${B.y}) / (${C.x}−${B.x})<br>
      &nbsp;&nbsp; = ${C.y-B.y}/${C.x-B.x}<br>
      &nbsp;&nbsp; = <b>${mBC.toFixed(2)}</b><br><br>

      Product of slopes:<br>
      m₁ × m₂ = ${mAB.toFixed(2)} × ${mBC.toFixed(2)} = <b>${(mAB*mBC).toFixed(0)}</b><br><br>

      <span class="note">Since product = −1, adjacent sides are perpendicular</span>
    </div>
  </div>

  <div class="step-group">
    <div class="step-header">Step 3: Rectangle Conditions</div>
    <div class="step">
      A quadrilateral is a rectangle if:<br><br>
      • Both pairs of opposite sides are equal<br>
      • One interior angle is 90°<br><br>

      We have shown:<br>
      <span class="hl">AB = CD</span> and <span class="hl">BC = DA</span><br>
      and <span class="hl">AB ⟂ BC</span>
    </div>
  </div>

  <div class="final">
    ∴ The given points are the vertices of a rectangle.
  </div>
  `;

  prompt.innerHTML = `Press <b>Y</b> for a new question or <b>N</b> to exit.`;
  stage="a";
}

/* ---------- Controls ---------- */
window.addEventListener("keydown",e=>{
  const k=(e.key||"").toLowerCase();
  if(stage==="q") showA();
  else if(k==="y") showQ();
  else if(k==="n"){
    document.getElementById("card").innerHTML =
      "<h2 style='text-align:center;padding:60px;'>Rectangle proofs fully mastered.</h2>";
  }
});

document.body.addEventListener("click",()=>{ if(stage==="q") showA(); });

showQ();
})();
</script>
</body>
</html>
