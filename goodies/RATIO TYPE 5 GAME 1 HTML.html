<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ratio Sum Problems – Find the Numbers</title>
<style>
  :root { --bg:#fff; --card:#fff; --muted:#666; --accent:#0b59c6; }
  html,body{
    height:100%; margin:0; background:var(--bg);
    font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:#111;
  }
  .wrap{
    min-height:100%; display:flex; align-items:center;
    justify-content:center; padding:20px;
  }
  .card{
    width:100%; max-width:1020px; background:var(--card);
    border-radius:10px; padding:22px 20px;
    box-shadow:0 8px 28px rgba(16,49,90,0.06);
  }
  h1{ font-size:16px; margin:0 0 10px; font-weight:700; }
  .question{ font-size:20px; color:var(--accent); margin:12px 0; font-weight:700; }
  .prompt{ color:var(--muted); font-size:13px; margin-bottom:10px; font-style:italic; }
  .steps{ white-space:pre-line; font-size:17px; line-height:1.45; color:#111; margin-top:12px; }
  .foot{ margin-top:10px; color:var(--muted); font-size:13px; }
  .hidden{ display:none; }
  .goodbye{ padding:48px; text-align:center; font-size:20px; color:#333; }
</style>
</head>

<body>
<div class="wrap">
  <div class="card" id="card" role="main" aria-live="polite">
    <h1>Find the Numbers (Ratio & Sum)</h1>
    <div class="question" id="qText">—</div>
    <div class="prompt" id="prompt">Press any key to reveal all steps…</div>
    <div id="stepsBox" class="steps hidden"></div>
    <div class="foot">After reveal press <strong>y</strong> for next or <strong>n</strong> to exit.</div>
  </div>
</div>

<script>
(function(){

function r(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

// 3 variants for 2-number problems
const variants2 = [
  "Two numbers are in the ratio {A}:{B} and their sum is {S}. Find the numbers.",
  "The total of two numbers is {S}. Their ratio is {A}:{B}. What are the numbers?",
  "Determine the values of two numbers whose sum is {S} and whose ratio is {A}:{B}."
];

// 3 variants for 3-number problems
const variants3 = [
  "Three numbers are in the ratio {A}:{B}:{C} and their sum is {S}. Find the numbers.",
  "The combined total of three numbers is {S}. They are in the ratio {A}:{B}:{C}. What are the numbers?",
  "Determine the three numbers whose sum is {S} and whose ratio is {A}:{B}:{C}."
];

let stage="question";
const qEl=document.getElementById("qText");
const prompt=document.getElementById("prompt");
const stepsBox=document.getElementById("stepsBox");

let problemType, A,B,C,S,aVal;

function makeQuestion(){
  stage="question";
  stepsBox.classList.add("hidden");
  stepsBox.textContent="";
  prompt.textContent="Press any key to reveal all steps…";

  // Randomly choose 2-number or 3-number problem (50/50)
  problemType = Math.random() < 0.5 ? 2 : 3;

  if(problemType === 2){
    // 2-number ratio: A:B, sum S
    A = r(1,15);
    B = r(1,15);
    if(A===B){ A++; } // avoid trivial

    aVal = r(1,20);
    S = (A + B) * aVal;

    const v = variants2[r(0,variants2.length-1)];
    const q = v.replace(/\{A\}/g,A)
               .replace(/\{B\}/g,B)
               .replace(/\{S\}/g,S);
    qEl.textContent = q;
  }
  else{
    // 3-number ratio: A:B:C, sum S
    A = r(1,10);
    B = r(1,10);
    C = r(1,10);
    if(A===B && B===C){ C++; } // avoid trivial

    aVal = r(1,20);
    S = (A + B + C) * aVal;

    const v = variants3[r(0,variants3.length-1)];
    const q = v.replace(/\{A\}/g,A)
               .replace(/\{B\}/g,B)
               .replace(/\{C\}/g,C)
               .replace(/\{S\}/g,S);
    qEl.textContent = q;
  }
}

function reveal(){
  stage="answer";
  prompt.textContent='Press "y" for next or "n" to exit.';
  stepsBox.classList.remove("hidden");

  let t="", x,y,z;

  if(problemType === 2){
    // 2-number solution steps — faithful to image
    t += "Step 1 — Let the numbers be:\n";
    t += "x = " + A + "a\n";
    t += "y = " + B + "a\n\n";

    t += "Step 2 — Use the sum condition:\n";
    t += A + "a + " + B + "a = " + S + "\n\n";

    t += "Step 3 — Combine like terms:\n";
    t += "(" + (A+B) + ")a = " + S + "\n\n";

    t += "Step 4 — Solve for a:\n";
    t += "a = " + S + " ÷ " + (A+B) + "\n";
    t += "a = " + aVal + "\n\n";

    x = A * aVal;
    y = B * aVal;

    t += "Step 5 — Find the numbers:\n";
    t += "x = " + A + " × " + aVal + " = " + x + "\n";
    t += "y = " + B + " × " + aVal + " = " + y + "\n\n";

    t += "Step 6 — Verification:\n";
    t += x + " + " + y + " = " + (x+y) + "\n";
    t += "Verified.\n";
  }

  else{
    // 3-number solution steps — faithful to image
    t += "Step 1 — Let the numbers be:\n";
    t += "x = " + A + "a\n";
    t += "y = " + B + "a\n";
    t += "z = " + C + "a\n\n";

    t += "Step 2 — Use the sum condition:\n";
    t += A + "a + " + B + "a + " + C + "a = " + S + "\n\n";

    t += "Step 3 — Combine like terms:\n";
    t += "(" + (A+B+C) + ")a = " + S + "\n\n";

    t += "Step 4 — Solve for a:\n";
    t += "a = " + S + " ÷ " + (A+B+C) + "\n";
    t += "a = " + aVal + "\n\n";

    x = A * aVal;
    y = B * aVal;
    z = C * aVal;

    t += "Step 5 — Find the numbers:\n";
    t += "x = " + A + " × " + aVal + " = " + x + "\n";
    t += "y = " + B + " × " + aVal + " = " + y + "\n";
    t += "z = " + C + " × " + aVal + " = " + z + "\n\n";

    t += "Step 6 — Verification:\n";
    t += x + " + " + y + " + " + z + " = " + (x+y+z) + "\n";
    t += "Verified.\n";
  }

  stepsBox.textContent = t;
}

makeQuestion();

window.addEventListener("keydown",e=>{
  const k=(e.key||"").toLowerCase();
  if(stage==="question"){ reveal(); }
  else if(stage==="answer"){
    if(k==="y"){ makeQuestion(); }
    else if(k==="n"){
      document.getElementById("card").innerHTML =
        '<div class="goodbye">Goodbye — thanks for learning!<div style="font-size:13px;color:#666;margin-top:8px">You may now close this tab.</div></div>';
    }
  }
});

document.addEventListener("selectstart",e=>e.preventDefault());

})();
</script>
</body>
</html>
