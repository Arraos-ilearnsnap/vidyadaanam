<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ratio Division Problem</title>
<style>
  :root{--bg:#fff;--card:#fff;--muted:#666;--accent:#0b59c6;}
  html,body{
    height:100%;margin:0;background:var(--bg);
    font-family:Segoe UI,Roboto,Arial,sans-serif;color:#111;
  }
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:20px;}
  .card{width:100%;max-width:1000px;background:var(--card);border-radius:10px;padding:22px 20px;
    box-shadow:0 8px 28px rgba(16,49,90,0.06);}
  h1{font-size:16px;margin:0 0 10px;font-weight:700;}
  .question{font-size:20px;color:var(--accent);margin:12px 0;font-weight:700;}
  .prompt{color:var(--muted);font-size:13px;margin-bottom:10px;font-style:italic;}
  .steps{white-space:pre-line;font-size:17px;line-height:1.55;margin-top:12px;}
  .hidden{display:none;}
  .foot{margin-top:10px;color:var(--muted);font-size:13px;}
  .goodbye{padding:48px;text-align:center;font-size:20px;color:#333;}
  .box{display:inline-block;border:2px solid #7aa6ff;padding:2px 6px;border-radius:6px;background:#eaf2ff;margin-left:4px;}
</style>
</head>

<body>
<div class="wrap">
  <div class="card" id="card" role="main" aria-live="polite">
    <h1>Ratio Division Problem</h1>
    <div class="question" id="qText">—</div>
    <div class="prompt" id="prompt">Press any key to reveal all steps…</div>
    <div id="stepsBox" class="steps hidden"></div>
    <div class="foot">After reveal press <b>y</b> for next or <b>n</b> to exit.</div>
  </div>
</div>

<script>
(function(){

// Hindu Names
const BOYS = ["Arjun","Ravi","Rohan","Karthik","Manish","Aditya","Harsh","Nikhil","Vivek","Sandeep","Varun","Siddharth","Pranav","Amit","Devesh"];
const GIRLS = ["Shilpa","Kavya","Anjali","Riya","Pooja","Sneha","Divya","Meera","Priya","Neha","Asha","Kiran","Tanvi","Swati","Nandita"];

// Currency symbols
const CURRENCY = ["₹","$","€","£","¥","₩","₱","₦","฿","₺"];

// Linguistic variants
const VARIANTS = [
 (name1,name2,curr,amt,p,q)=> `Divide ${curr}${amt} between ${name1} and ${name2} in the ratio ${p}:${q}. Find each person's share.`,
 (name1,name2,curr,amt,p,q)=> `${name1} and ${name2} received ${curr}${amt} together. They decided to split it in the ratio ${p}:${q}. How much does each receive?`,
 (name1,name2,curr,amt,p,q)=> `The combined amount for ${name1} and ${name2} is ${curr}${amt}. If their shares are in the ratio ${p}:${q}, calculate what each one gets.`
];

function r(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function gcd(a,b){while(b){let t=a%b;a=b;b=t;}return a;}

// Generate ratio-division problem
function generateProblem(){

  // Pick two names
  let name1 = BOYS[r(0,BOYS.length-1)];
  let name2 = GIRLS[r(0,GIRLS.length-1)];

  // Currency
  let curr = CURRENCY[r(0,CURRENCY.length-1)];

  // Ratio (coprime)
  let p = r(1,9), q = r(1,9);
  let g = gcd(p,q);
  p/=g; q/=g; // ensure coprime

  // Amount must be divisible by (p+q)
  let base = p+q;
  let multiplier = r(50,200); // random scaling
  let amt = base * multiplier;

  const variant = VARIANTS[r(0,VARIANTS.length-1)];
  const question = variant(name1,name2,curr,amt,p,q);

  return {name1,name2,curr,amt,p,q,question};
}

let DATA=null, stage="question";
const qEl=document.getElementById("qText");
const stepsEl=document.getElementById("stepsBox");
const prompt=document.getElementById("prompt");

function newProblem(){
  stage="question";
  stepsEl.classList.add("hidden");
  stepsEl.textContent="";
  prompt.textContent="Press any key to reveal all steps…";

  DATA = generateProblem();
  qEl.textContent = DATA.question;
}

function reveal(){
  stage="answer";
  stepsEl.classList.remove("hidden");
  prompt.textContent='Press "y" for next or "n" to exit.';

  const {name1,name2,curr,amt,p,q} = DATA;
  let A = p, B = q;

  let t="";
  t+=`Let ${name1}'s share = ${A}a\n`;
  t+=`Let ${name2}'s share = ${B}a\n\n`;

  t+=`Sum of shares = ${curr}${amt} = ${A}a + ${B}a = ${(A+B)}a\n\n`;

  t+=`Solving for a,\n`;
  t+=`⇒ ${(A+B)}a = ${amt}\n`;
  t+=`⇒ a = ${amt} ÷ ${(A+B)} = ${amt/(A+B)}\n\n`;

  let a = amt/(A+B);
  let share1 = A*a;
  let share2 = B*a;

  t+=`Substitute a = ${a},\n`;
  t+=`${name1}'s share = ${A}a = ${A}×${a} = ${curr}${share1}\n`;
  t+=`${name2}'s share = ${B}a = ${B}×${a} = ${curr}${share2}\n\n`;

  t+=`Verification:\n`;
  t+=`${share1} + ${share2} = ${amt}\n`;
  t+=`Verified.\n`;

  stepsEl.textContent = t;
}

window.addEventListener("keydown", e=>{
  let k=(e.key||"").toLowerCase();
  if(stage==="question") reveal();
  else if(stage==="answer"){
    if(k==="y") newProblem();
    else if(k==="n"){
      document.getElementById("card").innerHTML =
        '<div class="goodbye">Goodbye — thanks for learning!<br><span style="color:#777;font-size:13px">You may close this tab.</span></div>';
    }
  }
});

newProblem();

})();
</script>

</body>
</html>
