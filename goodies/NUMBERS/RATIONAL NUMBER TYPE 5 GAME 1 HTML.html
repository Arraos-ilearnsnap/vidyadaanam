<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Prime Factorization – Exam Practice</title>

<style>
  body{
    margin:0;
    padding:24px;
    font-family:"Segoe UI", Roboto, Arial, sans-serif;
    background:#fff;
    color:#111;
  }
  .card{
    max-width:900px;
    margin:auto;
    padding:26px;
    border-radius:12px;
    box-shadow:0 8px 26px rgba(0,0,0,0.08);
  }
  .q{
    font-size:18px;
    font-weight:700;
    margin-bottom:12px;
  }
  .line{
    font-size:16px;
    margin:6px 0;
    white-space:pre-wrap;
  }
  .ans{
    border:2px solid #111;
    padding:10px;
    margin-top:10px;
    display:inline-block;
    font-weight:600;
  }
  .hint{
    font-size:13px;
    font-style:italic;
    color:#555;
    margin-top:14px;
  }
</style>
</head>

<body>
<main class="card" role="main" aria-live="polite" id="card">

<div id="content"></div>
<div class="hint" id="hint">Press any key to see the answer.</div>

</main>

<script>
(function(){
  "use strict";

  const NUMBERS = [429, 5005, 2431, 105, 462, 651, 7429, 3825, 156, 140];
  const PRIMES  = [2,3,5,7,11,13,17,19,23,29];

  let stage = "question";
  const content = document.getElementById("content");
  const hint = document.getElementById("hint");

  function factorize(n){
    let steps = [];
    let original = n;
    let factors = [];
    for(let p of PRIMES){
      while(n % p === 0){
        steps.push(`${p} | ${n}`);
        factors.push(p);
        n = n / p;
      }
    }
    steps.push(`    1`);
    return {steps, factors, original};
  }

  function powerForm(factors){
    const map = {};
    factors.forEach(f => map[f] = (map[f]||0)+1);
    return Object.keys(map)
      .map(p => map[p]>1 ? `${p}<sup>${map[p]}</sup>` : `${p}`)
      .join(" × ");
  }

  function ask(){
    content.innerHTML = "";
    hint.textContent = "Press any key to see the answer.";
    stage = "question";

    const n = NUMBERS[Math.floor(Math.random()*NUMBERS.length)];
    const data = factorize(n);

    content.dataset.solution = JSON.stringify(data);

    content.innerHTML =
      `<div class="q">Q. Express ${n} as a product of its prime factors.</div>`;
  }

  function reveal(){
    stage = "answer";
    const data = JSON.parse(content.dataset.solution);
    const f = data.factors.join(" × ");

    let html = `
      <div class="line"><b>Prime factorization:</b></div>
      <div class="line">${data.steps.join("\n")}</div>
      <div class="ans">
        Ans: ${data.original} = ${f}<br>
        = ${powerForm(data.factors)}
      </div>
      <div class="line">${data.original} is expressed as a product of its prime factors.</div>
    `;
    content.innerHTML += html;
    hint.textContent = "Press y for next question or n to exit.";
  }

  ask();

  window.addEventListener("keydown", e=>{
    const k = (e.key||"").toLowerCase();
    if(stage==="question"){
      reveal();
    }else{
      if(k==="y") ask();
      if(k==="n") document.getElementById("card").innerHTML =
        "<div class='q'>Session ended.</div>";
    }
  });

})();
</script>
</body>
</html>
