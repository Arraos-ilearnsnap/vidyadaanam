<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ratio with Added Constant — Find the Numbers</title>
<style>
  :root{--bg:#fff;--card:#fff;--muted:#666;--accent:#0b59c6}
  html,body{
    height:100%;margin:0;background:var(--bg);
    font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#111;
  }
  .wrap{
    min-height:100%;display:flex;align-items:center;
    justify-content:center;padding:20px;
  }
  .card{
    width:100%;max-width:1020px;background:var(--card);
    border-radius:10px;padding:22px 20px;
    box-shadow:0 8px 28px rgba(16,49,90,0.06);
  }
  h1{font-size:16px;margin:0 0 10px;font-weight:700}
  .question{font-size:20px;color:var(--accent);margin:12px 0;font-weight:700}
  .prompt{color:var(--muted);font-size:13px;margin-bottom:10px;font-style:italic}
  .steps{white-space:pre-line;font-size:17px;line-height:1.45;color:#111;margin-top:12px}
  .foot{margin-top:10px;color:var(--muted);font-size:13px}
  .hidden{display:none}
  .goodbye{padding:48px;text-align:center;font-size:20px;color:#333}
</style>
</head>
<body>
<div class="wrap">
  <div class="card" id="card" role="main" aria-live="polite">
    <h1>Find the Numbers (Ratio + Added Constant)</h1>
    <div class="question" id="qText">—</div>
    <div class="prompt" id="prompt">Press any key to reveal all steps…</div>
    <div id="stepsBox" class="steps hidden"></div>
    <div class="foot">After reveal press <strong>y</strong> for next or <strong>n</strong> to exit.</div>
  </div>
</div>

<script>
(function(){

  function r(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

  // Linguistic variants
  const variants = [
    "If two numbers are in the ratio {A}:{B} and {K} is added to each, the ratio becomes {P}:{Q}. Find the numbers.",
    "Given that two numbers are in the ratio {A}:{B} and after adding {K} to both the ratio becomes {P}:{Q}, determine the numbers.",
    "Based on the ratio {A}:{B}, and knowing that adding {K} to each number changes the ratio to {P}:{Q}, compute the numbers.",
    "Two numbers are in the ratio {A}:{B}. After adding {K} to each number the new ratio becomes {P}:{Q}. What are the numbers?",
    "The ratio of two numbers is {A}:{B}. If {K} is added to both numbers and the ratio becomes {P}:{Q}, find the numbers."
  ];

  let A,B,K,P,Q,aVal;
  let stage="question";
  const qEl=document.getElementById("qText");
  const prompt=document.getElementById("prompt");
  const stepsBox=document.getElementById("stepsBox");

  function makeQuestion(){
    stage="question";
    stepsBox.classList.add("hidden");
    stepsBox.textContent="";
    prompt.textContent="Press any key to reveal all steps…";

    while(true){
      A=r(1,12);
      B=r(1,12);
      if(A===B) continue;
      if(A===1 && B===1) continue;

      K=r(1,15);

      P=r(1,12);
      Q=r(1,12);
      if(P===Q) continue;

      // Step 6 denominator:
      const denom = Q*A - P*B;
      const num = K*(P - Q);

      if(denom===0) continue;

      const a = num / denom;
      if(Number.isInteger(a) && a>0 && a<=50){
        aVal = a;
        break;
      }
    }

    const v = variants[r(0,variants.length-1)];
    const q = v.replace(/\{A\}/g,A)
               .replace(/\{B\}/g,B)
               .replace(/\{K\}/g,K)
               .replace(/\{P\}/g,P)
               .replace(/\{Q\}/g,Q);

    qEl.textContent = q;
  }

  function reveal(){
    stage="answer";
    prompt.textContent='Press "y" for next or "n" to exit.';
    stepsBox.classList.remove("hidden");

    const a = aVal;
    const num1 = A * a;
    const num2 = B * a;

    const QA = Q*A;
    const PB = P*B;
    const PK = P*K;
    const QK = Q*K;

    // Step 6 values
    const leftCoef = QA - PB;
    const rightConst = PK - QK;

    let t="";

    t += "Step 1 — Let the two numbers be:\n";
    t += "First number = x = " + A + "a\n";
    t += "Second number = y = " + B + "a\n\n";

    t += "Step 2 — Add " + K + " to each number:\n";
    t += "x + " + K + " = " + A + "a + " + K + "\n";
    t += "y + " + K + " = " + B + "a + " + K + "\n\n";

    t += "Step 3 — Apply the new ratio condition:\n";
    t += "(" + A + "a + " + K + ") / (" + B + "a + " + K + ") = " + P + "/" + Q + "\n\n";

    t += "Step 4 — Cross multiply:\n";
    t += Q + "(" + A + "a + " + K + ") = " + P + "(" + B + "a + " + K + ")\n\n";

    t += "Step 5 — Expand both sides:\n";
    t += QA + "a + " + QK + " = " + PB + "a + " + PK + "\n\n";

    t += "Step 6 — Rearrange to isolate a:\n";
    t += "(" + QA + "a - " + PB + "a) = (" + PK + " - " + QK + ")\n";
    t += "(" + leftCoef + ")a = " + rightConst + "\n\n";

    t += "Step 7 — Solve for a:\n";
    t += leftCoef + "a = " + rightConst + "\n";
    t += "a = (" + rightConst + ") / (" + leftCoef + ")\n";
    t += "a = " + a + "\n\n";

    t += "Step 8 — Substitute a to find the numbers:\n";
    t += "First number = " + A + "×" + a + " = " + num1 + "\n";
    t += "Second number = " + B + "×" + a + " = " + num2 + "\n\n";

    t += "Final Answer:\n";
    t += num1 + " and " + num2;

    stepsBox.textContent = t;
  }

  makeQuestion();

  window.addEventListener("keydown", e=>{
    const k=(e.key||"").toLowerCase();
    if(stage==="question"){ reveal(); }
    else if(stage==="answer"){
      if(k==="y"){ makeQuestion(); }
      else if(k==="n"){
        document.getElementById("card").innerHTML =
          '<div class="goodbye">Goodbye — thanks for learning!<div style="font-size:13px;color:#666;margin-top:8px">You may now close this tab.</div></div>';
      }
    }
  });

  document.addEventListener("selectstart", e=>e.preventDefault());

})();
</script>
</body>
</html>
