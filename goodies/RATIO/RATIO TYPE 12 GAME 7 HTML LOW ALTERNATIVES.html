<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ratio of Second Part to Total – Step by Step</title>

<style>
body{
  margin:0;
  padding:24px;
  font-family:"Segoe UI", Roboto, Arial, sans-serif;
  background:#f4f6f8;
  display:flex;
  justify-content:center;
}
.card{
  max-width:900px;
  width:100%;
  background:#ffffff;
  padding:28px;
  border-radius:12px;
  box-shadow:0 8px 26px rgba(0,0,0,0.08);
}
.q{
  font-size:22px;
  font-weight:700;
  margin-bottom:18px;
}
.line{
  font-size:18px;
  margin:8px 0;
}
.step{
  font-size:18px;
  margin:10px 0;
}
.frac{
  display:inline-flex;
  flex-direction:column;
  align-items:center;
  margin:0 6px;
}
.frac .num{
  border-bottom:2px solid #000;
  padding:0 6px;
}
.frac .den{
  padding:0 6px;
}
.box{
  display:inline-block;
  padding:10px 18px;
  border:2px solid #111;
  font-weight:700;
  background:#f9f9f9;
  margin-top:16px;
}
.prompt{
  margin-top:24px;
  font-size:14px;
  font-style:italic;
  color:#555;
  text-align:center;
}
</style>
</head>

<body>
<main class="card" id="card">
  <div id="content"></div>
  <div class="prompt" id="prompt">
    Press any key to reveal the solution. After reveal press <b>y</b> for next or <b>n</b> to exit.
  </div>
</main>

<script>
(function(){
"use strict";

/* ---------------- PRIMES ---------------- */
const primes = [2,3,5,7,11,13,17,19,23,29];

/* ---------------- QUESTIONS ---------------- */
const questions = [
  q => `Ravi walks ${q.A} metres and Sohan walks ${q.B} metres. Find the ratio of Sohan’s distance to the total distance walked.`,
  q => `A rope is cut into two pieces of ${q.A} cm and ${q.B} cm. Find the ratio of the second piece to the total length.`,
  q => `Road X is ${q.A} km long and Road Y is ${q.B} km long. Find the ratio of Road Y to the total length.`,
  q => `Tower Alpha is ${q.A} m high and Tower Beta is ${q.B} m high. Find the ratio of Tower Beta’s height to the total height.`,
  q => `A ribbon has a red part of ${q.A} cm and a blue part of ${q.B} cm. Find the ratio of the blue part to the total length.`,
  q => `A wire has two segments measuring ${q.A} m and ${q.B} m. Find the ratio of the second segment to the total length.`,
  q => `Field East has width ${q.A} m and Field West has width ${q.B} m. Find the ratio of Field West’s width to the total width.`,
  q => `A train covers ${q.A} km before a stop and ${q.B} km after the stop. Find the ratio of distance after the stop to the total distance.`,
  q => `Deepu earns ${q.A} rupees and Kiran earns ${q.B} rupees. Find the ratio of Kiran’s income to the total income.`,
  q => `A class has ${q.A} boys and ${q.B} girls. Find the ratio of girls to the total number of students.`
];

/* ---------------- HELPERS ---------------- */
function gcd(a,b){ return b ? gcd(b,a%b) : a; }
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/*
 Generate numbers so that:
 - B is preferred
 - total is generated
 - A = total − B
 - HCF(B, total) > 1
 - all primes ≤ 29
 - 100 ≤ A, B, total ≤ 2000
*/
function generateNumbers(){
  let common = pick(primes);
  let B = common * pick(primes);
  let total = B * pick(primes);

  while(B < 100) B *= pick(primes);
  while(total < 100) total *= pick(primes);

  while(B > 2000) B = Math.floor(B / pick(primes));
  while(total > 2000) total = Math.floor(total / pick(primes));

  let A = total - B;

  if(A < 100 || A > 2000) return generateNumbers();
  if(gcd(B, total) === 1) return generateNumbers();

  return {A, B, total};
}

function fracHTML(n,d){
  return `<span class="frac"><span class="num">${n}</span><span class="den">${d}</span></span>`;
}

/* ---------------- FLOW ---------------- */
const content = document.getElementById("content");
const prompt  = document.getElementById("prompt");
let stage="q", Q;

function showQ(){
  Q = generateNumbers();
  const text = pick(questions)(Q);
  content.innerHTML = `
    <div class="q">Find the ratio in simplest form:</div>
    <div class="q">${text}</div>
  `;
  stage="q";
}

function showA(){
  let n = Q.B;
  let d = Q.total;

  let html = `
    <div class="line"><b>Step 1: Find the total value</b></div>
    <div class="step">Total = ${Q.A} + ${Q.B} = ${Q.total}</div>

    <div class="line"><b>Step 2: Write the ratio as a fraction</b></div>
    <div class="step">= ${fracHTML(n,d)}</div>
  `;

  for(let p of primes){
    while(n % p === 0 && d % p === 0){
      html += `<div class="step">= ${fracHTML(n+" ÷ "+p, d+" ÷ "+p)}</div>`;
      n /= p;
      d /= p;
      html += `<div class="step">= ${fracHTML(n,d)}</div>`;
    }
  }

  html += `
    <div class="line">
      <span class="box">
        So, the required ratio in simplest form is ${n} : ${d}.
      </span>
    </div>
  `;

  content.innerHTML += html;
  prompt.textContent="Press y for next question or n to exit.";
  stage="a";
}

showQ();

window.addEventListener("keydown", e=>{
  const k=(e.key||"").toLowerCase();
  if(stage==="q") showA();
  else if(k==="y"){ showQ(); prompt.textContent="Press any key to reveal the solution."; }
  else if(k==="n"){ document.getElementById("card").innerHTML="<div class='q'>Session ended.</div>"; }
});
})();
</script>
</body>
</html>
