<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ratio Division Problem (3 Persons)</title>
<style>
  :root{--bg:#fff;--card:#fff;--muted:#666;--accent:#0b59c6;}
  html,body{
    height:100%;margin:0;background:var(--bg);
    font-family:Segoe UI,Roboto,Arial,sans-serif;color:#111;
  }
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:20px;}
  .card{width:100%;max-width:1000px;background:var(--card);border-radius:10px;padding:22px 20px;
    box-shadow:0 8px 28px rgba(16,49,90,0.06);}
  h1{font-size:16px;margin:0 0 10px;font-weight:700;}
  .question{font-size:20px;color:var(--accent);margin:12px 0;font-weight:700;}
  .prompt{color:var(--muted);font-size:13px;margin-bottom:10px;font-style:italic;}
  .steps{white-space:pre-line;font-size:17px;line-height:1.55;margin-top:12px;}
  .hidden{display:none;}
  .foot{margin-top:10px;color:var(--muted);font-size:13px;}
  .goodbye{padding:48px;text-align:center;font-size:20px;color:#333;}
  .box{display:inline-block;border:2px solid #7aa6ff;padding:2px 6px;border-radius:6px;background:#eaf2ff;margin-left:4px;}
</style>
</head>

<body>
<div class="wrap">
  <div class="card" id="card" role="main" aria-live="polite">
    <h1>Ratio Division Problem</h1>
    <div class="question" id="qText">—</div>
    <div class="prompt" id="prompt">Press any key to reveal all steps…</div>
    <div id="stepsBox" class="steps hidden"></div>
    <div class="foot">After reveal press <b>y</b> for next or <b>n</b> to exit.</div>
  </div>
</div>

<script>
(function(){ 

// Hindu Names
const BOYS = ["Arjun","Ravi","Rohan","Karthik","Manish","Aditya","Harsh","Nikhil","Vivek","Sandeep","Varun","Siddharth","Pranav","Amit","Devesh"];
const GIRLS = ["Shilpa","Kavya","Anjali","Riya","Pooja","Sneha","Divya","Meera","Priya","Neha","Asha","Kiran","Tanvi","Swati","Nandita"];

// Currency symbols
const CURRENCY = ["₹","$","€","£","¥","₩","₱","₦","฿","₺"];

// 3-person linguistic variants
const VARIANTS = [
 (n1,n2,n3,curr,amt,p,q,r)=> `Divide ${curr}${amt} among ${n1}, ${n2} and ${n3} in the ratio ${p}:${q}:${r}. Find each person's share.`,
 (n1,n2,n3,curr,amt,p,q,r)=> `${n1}, ${n2} and ${n3} together received ${curr}${amt}. They decided to divide it in the ratio ${p}:${q}:${r}. How much does each get?`,
 (n1,n2,n3,curr,amt,p,q,r)=> `The combined amount for ${n1}, ${n2} and ${n3} is ${curr}${amt}. If they share it in the ratio ${p}:${q}:${r}, calculate each individual's share.`
];

function r(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function gcd(a,b){while(b){let t=a%b;a=b;b=t;}return a;}

// Generate 3-person ratio-division problem
function generateProblem(){

  // Pick 1 boy + 1 girl
  let name1 = BOYS[r(0,BOYS.length-1)];
  let name2 = GIRLS[r(0,GIRLS.length-1)];

  // Pick a unique third name (boy or girl)
  let pool = BOYS.concat(GIRLS);
  let name3;
  while(true){
    name3 = pool[r(0,pool.length-1)];
    if(name3 !== name1 && name3 !== name2) break;
  }

  // Currency
  let curr = CURRENCY[r(0,CURRENCY.length-1)];

  // 3-term coprime ratio
  let p = r(1,9), q = r(1,9), s = r(1,9);
  let g = gcd(gcd(p,q),s);
  p/=g; q/=g; s/=g;

  // Amount divisible by (p+q+s)
  let base = p+q+s;
  let mult = r(50,200);
  let amt = base * mult;

  const variant = VARIANTS[r(0,VARIANTS.length-1)];
  const question = variant(name1,name2,name3,curr,amt,p,q,s);

  return {name1,name2,name3,curr,amt,p,q,s,question};
}

let DATA=null, stage="question";
const qEl=document.getElementById("qText");
const stepsEl=document.getElementById("stepsBox");
const prompt=document.getElementById("prompt");

function newProblem(){
  stage="question";
  stepsEl.classList.add("hidden");
  stepsEl.textContent="";
  prompt.textContent="Press any key to reveal all steps…";

  DATA = generateProblem();
  qEl.textContent = DATA.question;
}

function reveal(){
  stage="answer";
  stepsEl.classList.remove("hidden");
  prompt.textContent='Press "y" for next or "n" to exit.';

  const {name1,name2,name3,curr,amt,p,q,s} = DATA;

  let t="";
  t+=`Let ${name1}'s share = ${p}a\n`;
  t+=`Let ${name2}'s share = ${q}a\n`;
  t+=`Let ${name3}'s share = ${s}a\n\n`;

  t+=`Sum of shares = ${curr}${amt} = ${p}a + ${q}a + ${s}a = ${(p+q+s)}a\n\n`;

  t+=`Solving for a,\n`;
  t+=`⇒ ${(p+q+s)}a = ${amt}\n`;
  t+=`⇒ a = ${amt} ÷ ${(p+q+s)} = ${amt/(p+q+s)}\n\n`;

  let a = amt/(p+q+s);

  let share1 = p*a;
  let share2 = q*a;
  let share3 = s*a;

  t+=`Substitute a = ${a},\n`;
  t+=`${name1}'s share = ${p}a = ${p}×${a} = ${curr}${share1}\n`;
  t+=`${name2}'s share = ${q}a = ${q}×${a} = ${curr}${share2}\n`;
  t+=`${name3}'s share = ${s}a = ${s}×${a} = ${curr}${share3}\n\n`;

  t+=`Verification:\n`;
  t+=`${share1} + ${share2} + ${share3} = ${amt}\n`;
  t+=`Verified.\n`;

  stepsEl.textContent = t;
}

window.addEventListener("keydown", e=>{
  let k=(e.key||"").toLowerCase();
  if(stage==="question") reveal();
  else if(stage==="answer"){
    if(k==="y") newProblem();
    else if(k==="n"){
      document.getElementById("card").innerHTML =
        '<div class="goodbye">Goodbye — thanks for learning!<br><span style="color:#777;font-size:13px">You may close this tab.</span></div>';
    }
  }
});

newProblem();

})();
</script>

</body>
</html>
