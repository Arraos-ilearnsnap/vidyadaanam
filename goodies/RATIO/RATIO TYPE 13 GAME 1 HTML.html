<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Direct Proportion Verification</title>

<style>
  body{
    margin:0;
    font-family:Segoe UI,Roboto,Arial,sans-serif;
    background:#fff;
    color:#111;
  }
  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
  }
  .card{
    width:100%;
    max-width:950px;
    background:#fff;
    padding:24px;
    border-radius:10px;
    box-shadow:0 8px 28px rgba(0,0,0,0.08);
  }
  h1{
    font-size:16px;
    margin:0 0 12px;
    font-weight:700;
  }
  .question{
    font-size:20px;
    color:#0b59c6;
    font-weight:700;
    margin-bottom:10px;
  }
  .prompt{
    font-size:13px;
    color:#666;
    font-style:italic;
  }
  .steps{
    white-space:pre-line;
    font-size:17px;
    line-height:1.6;
    margin-top:16px;
  }
  .hidden{display:none;}
  .foot{
    margin-top:12px;
    font-size:13px;
    color:#666;
  }
  table{
    border-collapse:collapse;
    margin:12px 0;
  }
  td,th{
    border:1px solid #000;
    padding:6px 12px;
    text-align:center;
  }
</style>
</head>

<body>
<div class="wrap">
  <div class="card" id="card">
    <h1>Direct Proportion</h1>
    <div class="question" id="qText"></div>
    <div id="tableBox"></div>
    <div class="prompt" id="prompt">Press any key to reveal the solution…</div>
    <div class="steps hidden" id="stepsBox"></div>
    <div class="foot">After reveal press <b>y</b> for next or <b>n</b> to exit.</div>
  </div>
</div>

<script>
(function(){

const VARIANTS = [
  "Observe the following table and find whether x and y are directly proportional.",
  "Using the table given below, verify whether x varies directly as y.",
  "From the following values of x and y, determine if x is directly proportional to y."
];

function r(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

let DATA = null;
let stage = "question";

const qEl = document.getElementById("qText");
const tableBox = document.getElementById("tableBox");
const stepsEl = document.getElementById("stepsBox");
const prompt = document.getElementById("prompt");

// --------------------
// Generate proportional table (4–8 entries)
// --------------------
function generateTable(){
  const kNum = 1;
  const kDen = r(2,7); // UPDATED RANGE: 1/2 to 1/7
  const n = r(4,8);

  let pairs = [];
  let start = r(2,6);

  for(let i=0;i<n;i++){
    let y = (start + i) * kDen;
    let x = y * kNum / kDen;
    pairs.push([x,y]);
  }
  return {pairs, k:`${kNum}/${kDen}`};
}

// --------------------
// Render question + table
// --------------------
function renderQuestion(){
  const data = generateTable();
  DATA = data;

  qEl.textContent = VARIANTS[r(0,VARIANTS.length-1)];

  let html = "<table><tr><th>x</th>";
  data.pairs.forEach(p=> html += `<td>${p[0]}</td>`);
  html += "</tr><tr><th>y</th>";
  data.pairs.forEach(p=> html += `<td>${p[1]}</td>`);
  html += "</tr></table>";

  tableBox.innerHTML = html;
}

// --------------------
// Reveal solution (corrected)
// --------------------
function revealSolution(){
  const {pairs, k} = DATA;
  let t = "";

  t += "Step 1 — Condition for direct proportion\n";
  t += "x and y are directly proportional if x/y = k (constant)\n\n";

  t += "Step 2 — Find x/y for each pair\n\n";

  pairs.forEach((p,i)=>{
    let x=p[0], y=p[1];
    t += `x${i+1}/y${i+1} = ${x}/${y}`;

    // gradual simplification using smallest prime factors
    let simplified = false;
    [2,3,5].forEach(f=>{
      while(!simplified && x%f===0 && y%f===0){
        x/=f; y/=f;
        t += ` = ${x}/${y}`;
        simplified = (x+"/"+y === k);
      }
    });

    if(x+"/"+y !== k){
      t += ` = ${k}`;
    }

    t += ` = k${i+1}\n`;
  });

  t += "\nStep 3 — Compare constants\n";
  t += pairs.map((_,i)=>`k${i+1}`).join(" = ") + ` = ${k}\n\n`;

  t += "Step 4 — Conclusion\n";
  t += "Since the value of x/y is the same for all pairs,\n";
  t += "x ∝ y  (x is directly proportional to y)\n";

  stepsEl.textContent = t;
  stepsEl.classList.remove("hidden");
  prompt.textContent = 'Press "y" for next or "n" to exit.';
}

// --------------------
window.addEventListener("keydown", e=>{
  const k=(e.key||"").toLowerCase();
  if(stage==="question"){
    revealSolution();
    stage="answer";
  }else{
    if(k==="y"){
      stepsEl.classList.add("hidden");
      prompt.textContent="Press any key to reveal the solution…";
      renderQuestion();
      stage="question";
    }else if(k==="n"){
      document.getElementById("card").innerHTML =
        '<div style="text-align:center;font-size:20px;padding:40px;">Goodbye — keep learning.</div>';
    }
  }
});

// INITIAL RENDER
renderQuestion();

})();
</script>
</body>
</html>
