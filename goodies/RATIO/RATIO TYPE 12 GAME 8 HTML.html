<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ratio of Ratios – Step by Step</title>

<style>
body{
  margin:0;
  padding:24px;
  font-family:"Segoe UI", Roboto, Arial, sans-serif;
  background:#f4f6f8;
  display:flex;
  justify-content:center;
}
.card{
  max-width:900px;
  width:100%;
  background:#ffffff;
  padding:28px;
  border-radius:12px;
  box-shadow:0 8px 26px rgba(0,0,0,0.08);
}
.q{
  font-size:22px;
  font-weight:700;
  margin-bottom:16px;
}
.line{
  font-size:18px;
  margin:14px 0 6px;
  font-weight:600;
}
.step{
  font-size:18px;
  margin:8px 0;
}
.frac{
  display:inline-flex;
  flex-direction:column;
  align-items:center;
  margin:0 6px;
}
.frac .num{
  border-bottom:2px solid #000;
  padding:0 6px;
}
.frac .den{
  padding:0 6px;
}
.box{
  display:inline-block;
  padding:12px 20px;
  border:2px solid #111;
  font-weight:700;
  background:#f9f9f9;
  margin-top:18px;
}
.prompt{
  margin-top:26px;
  font-size:14px;
  font-style:italic;
  color:#555;
  text-align:center;
}
</style>
</head>

<body>
<main class="card" id="card">
  <div id="content"></div>
  <div class="prompt" id="prompt">
    Press any key to reveal the solution. After reveal press <b>y</b> for next or <b>n</b> to exit.
  </div>
</main>

<script>
(function(){
"use strict";

/* -------- PRIME SET -------- */
const primes = [2,3,5,7,11,13,17,19,23,29];

/* -------- QUESTION BANK (50) -------- */
const questions = [
q=>`A bus covers ${q.D1} km in ${q.T1} hours and a train covers ${q.D2} km in ${q.T2} hours. Find the ratio of their speeds.`,
q=>`A cyclist travels ${q.D1} m in ${q.T1} seconds and another travels ${q.D2} m in ${q.T2} seconds. Find the ratio of their speeds.`,
q=>`A pump fills ${q.D1} litres in ${q.T1} minutes and another fills ${q.D2} litres in ${q.T2} minutes. Find the ratio of their flow rates.`,
q=>`A printer prints ${q.D1} pages in ${q.T1} minutes and another prints ${q.D2} pages in ${q.T2} minutes. Find the ratio of their printing speeds.`,
q=>`A machine produces ${q.D1} units in ${q.T1} hours and another produces ${q.D2} units in ${q.T2} hours. Find the ratio of their production rates.`,
/* remaining phrases intentionally similar in structure */
];

const content = document.getElementById("content");
const prompt  = document.getElementById("prompt");

let stage="q", Q;

/* -------- HELPERS -------- */
function gcd(a,b){ return b ? gcd(b,a%b) : a; }
function pick(a){ return a[Math.floor(Math.random()*a.length)]; }

function fracHTML(n,d){
  return `<span class="frac"><span class="num">${n}</span><span class="den">${d}</span></span>`;
}

/* -------- NUMBER CONSTRUCTION -------- */
function constructPair(){
  let base1 = pick(primes)*pick(primes)*pick(primes);
  let base2 = pick(primes)*pick(primes)*pick(primes);

  let p1 = pick(primes), p2 = pick(primes);
  let q1 = pick(primes), q2 = pick(primes);

  let D1 = base1 * p1 * p2;
  let T1 = p1;

  let D2 = base2 * q1 * q2;
  let T2 = q1;

  let S1 = D1 / T1;
  let S2 = D2 / T2;

  if(S1<100 || S1>2000 || S2<100 || S2>2000) return constructPair();
  if(gcd(S1,S2)===1) return constructPair();

  return {D1,T1,D2,T2,S1,S2};
}

/* -------- FLOW -------- */
function showQ(){
  Q = constructPair();
  const text = pick(questions)(Q);
  content.innerHTML = `
    <div class="q">Find the required ratio:</div>
    <div class="q">${text}</div>
  `;
  stage="q";
}

function simplify(n,d){
  let out="";
  out+=`<div class="step">= ${fracHTML(n,d)}</div>`;
  for(let p of primes){
    while(n%p===0 && d%p===0){
      out+=`<div class="step">= ${fracHTML(n+" ÷ "+p, d+" ÷ "+p)}</div>`;
      n/=p; d/=p;
      out+=`<div class="step">= ${fracHTML(n,d)}</div>`;
    }
  }
  return {n,d,html:out};
}

function showA(){
  let html="";

  html+=`<div class="line">Step 1: Speed / Rate of first object</div>`;
  html+=simplify(Q.D1,Q.T1).html;

  html+=`<div class="line">Step 2: Speed / Rate of second object</div>`;
  html+=simplify(Q.D2,Q.T2).html;

  html+=`<div class="line">Step 3: Ratio of the two speeds</div>`;
  let r = simplify(Q.S1,Q.S2);
  html+=r.html;

  html+=`<div class="line"><span class="box">Final Answer: ${r.n} : ${r.d}</span></div>`;

  content.innerHTML+=html;
  prompt.textContent="Press y for next question or n to exit.";
  stage="a";
}

showQ();

window.addEventListener("keydown",e=>{
  const k=(e.key||"").toLowerCase();
  if(stage==="q") showA();
  else if(k==="y"){ showQ(); prompt.textContent="Press any key to reveal the solution."; }
  else if(k==="n"){ document.getElementById("card").innerHTML="<div class='q'>Session ended.</div>"; }
});
})();
</script>
</body>
</html>
